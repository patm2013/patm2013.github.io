<head>

  <!-- Basic Page Needs
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <meta charset="utf-8">
  <title>Calendar Heatmap</title>
  <meta name="description" content="">
  <meta name="author" content="">

  <!-- Mobile Specific Metas
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <!-- FONT–––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <link href='http://fonts.googleapis.com/css?family=Raleway:400,300,600' rel='stylesheet' type='text/css'>
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
  <script src="http://cdnjs.cloudflare.com/ajax/libs/d3/3.5.2/d3.min.js"></script>

<style>
<!-- uses normalize and skeleton frameworks–––––––––––––––––––––––––––––––––––––––––––––––––– -->
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,hgroup,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block;vertical-align:baseline}audio:not([controls]){display:none;height:0}[hidden],template{display:none}a{background-color:transparent}a:active,a:hover{outline:0}abbr[title]{border-bottom:1px dotted}b,strong{font-weight:700}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sup{top:-.5em}sub{bottom:-.25em}img{border:0}svg:not(:root){overflow:hidden}figure{margin:1em 40px}hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}pre{overflow:auto}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}button,input,optgroup,select,textarea{color:inherit;font:inherit;margin:0}button{overflow:visible}button,select{text-transform:none}button,html input[type="button"],/* 1 */
input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}button[disabled],html input[disabled]{cursor:default}button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}input{line-height:normal}input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}input[type="number"]::-webkit-inner-spin-button,input[type="number"]::-webkit-outer-spin-button{height:auto}input[type="search"]{-webkit-appearance:textfield;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;box-sizing:content-box}input[type="search"]::-webkit-search-cancel-button,input[type="search"]::-webkit-search-decoration{-webkit-appearance:none}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{border:0;padding:0}textarea{overflow:auto}optgroup{font-weight:700}table{border-collapse:collapse;border-spacing:0}td,th{padding:0}.container{position:relative;width:95%;margin:0 auto;padding:0}.container .column,.container .columns{float:left;width:100%;box-sizing:border-box}.row{margin-bottom:2rem}.row .column:first-child,.row .columns:first-child{margin-left:0}@media (min-width: 550px){.container .column,.container .columns{margin-left:4%}.container .one.column,.container .one.columns{width:4.66666666667%}.container .two.columns{width:13.3333333333%}.container .three.columns{width:22%}.container .four.columns{width:30.6666666667%}.container .five.columns{width:39.3333333333%}.container .six.columns{width:48%}.container .seven.columns{width:56.6666666667%}.container .eight.columns{width:65.3333333333%}.container .nine.columns{width:74%}.container .ten.columns{width:82.6666666667%}.container .eleven.columns{width:91.3333333333%}.container .twelve.columns{width:100%;margin-left:0}.container .one-third.column{width:30.6666666667%}.container .two-thirds.column{width:65.3333333333%}.container .one-half.column{width:48%}.container .offset-by-one.column,.container .offset-by-one.columns{margin-left:8.66666666667%}.container .offset-by-two.column{margin-left:17.3333333333%}.container .offset-by-three.column{margin-left:26%}.container .offset-by-four.column{margin-left:34.6666666667%}.container .offset-by-five.column{margin-left:43.3333333333%}.container .offset-by-six.column{margin-left:52%}.container .offset-by-seven.column{margin-left:60.6666666667%}.container .offset-by-eight.column{margin-left:69.3333333333%}.container .offset-by-nine.column{margin-left:78%}.container .offset-by-ten.column{margin-left:86.6666666667%}.container .offset-by-eleven.column{margin-left:95.3333333333%}.container .offset-by-one-third.column{margin-left:34.6666666667%}.container .offset-by-two-thirds.column{margin-left:69.3333333333%}.container .offset-by-one-half.column{margin-left:52%}}html{font-size:62.5%}body{font-size:1.5em;line-height:1.6;font-weight:400;font-family:"Raleway","HelveticaNeue","Helvetica Neue",Helvetica,Arial,sans-serif;color:#222}h1,h2,h3,h4,h5,h6{font-weight:300;margin-top:0;margin-bottom:2rem}h1{font-size:4rem;line-height:1.2;letter-spacing:-.1rem}h2{font-size:3.6rem;line-height:1.25;letter-spacing:-.1rem}h3{font-size:3rem;line-height:1.3;letter-spacing:-.1rem}h4{font-size:2.4rem;line-height:1.35;letter-spacing:-.08rem}h5{font-size:1.8rem;line-height:1.5;letter-spacing:-.05rem}h6{font-size:1.5rem;line-height:1.6;letter-spacing:0}@media (min-width: 550px){h1{font-size:5rem}h2{font-size:4.2rem}h3{font-size:3.6rem}h4{font-size:3rem}h5{font-size:2.4rem}h6{font-size:1.5rem}}p{margin-top:0}a{color:#1EAEDB}a:hover{color:#0FA0CE}.button,button,input[type="submit"],input[type="reset"],input[type="button"]{display:inline-block;background-color:transparent;border-radius:4px;color:#555;text-align:center;font-size:11px;font-weight:600;text-decoration:none;cursor:pointer;border:1px solid #bbb;height:38px;line-height:38px;padding:0 30px;letter-spacing:.1rem;text-transform:uppercase;white-space:nowrap;box-sizing:border-box}.button:hover,button:hover,input[type="submit"]:hover,input[type="reset"]:hover,input[type="button"]:hover,.button:focus,button:focus,input[type="submit"]:focus,input[type="reset"]:focus,input[type="button"]:focus{border-color:#888;color:#333;outline:0}.button.button-primary,button.button-primary,input[type="submit"].button-primary,input[type="reset"].button-primary,input[type="button"].button-primary{color:#FFF;border-color:#33C3F0;background-color:#33C3F0}.button.button-primary:hover,button.button-primary:hover,input[type="submit"].button-primary:hover,input[type="reset"].button-primary:hover,input[type="button"].button-primary:hover,.button.button-primary:focus,button.button-primary:focus,input[type="submit"].button-primary:focus,input[type="reset"].button-primary:focus,input[type="button"].button-primary:focus{background-color:#1EAEDB;border-color:#1EAEDB;color:#FFF}input[type="email"],input[type="search"],input[type="text"],input[type="password"],textarea,select{border:1px solid #D1D1D1;height:36px;padding:6px 10px;border-radius:4px;box-shadow:none;background:#fff}input[type="email"],input[type="search"],input[type="text"],textarea{-webkit-appearance:none;-moz-appearance:none;appearance:none}textarea{min-height:65px;padding-top:6px;padding-bottom:6px}input[type="email"]:focus,input[type="search"]:focus,input[type="text"]:focus,input[type="password"]:focus,textarea:focus,select:focus{border:1px solid #33C3F0;outline:0}label,legend{display:block;font-weight:600;margin-bottom:.5rem}fieldset{border-width:0;padding:0}input[type="checkbox"],input[type="radio"]{display:inline}label > .label-body{display:inline-block;font-weight:400;margin-left:.5rem}ul{list-style:circle inside}ol{list-style:decimal inside}ol,ul{margin-top:0;padding-left:0}ul ul,ul ol,ol ol,ol ul{margin:1.5rem 0 1.5rem 3rem;font-size:90%}li{margin-bottom:1rem}code{padding:.2rem .5rem;margin:0 .2rem;font-size:90%;background:#F1F1F1;border:1px solid #E1E1E1;border-radius:4px;white-space:nowrap}pre > code{display:block;padding:1rem 1.5rem;white-space:pre}th,td{padding:12px 15px;text-align:left;border-bottom:1px solid #E1E1E1}th:first-child,td:first-child{padding-left:0}th:last-child,td:last-child{padding-right:0}button,.button{margin-bottom:1rem}input,textarea,select,fieldset{margin-bottom:1.5rem}pre,blockquote,form,dl,figure,table,p,ul,ol,form{margin-bottom:2.5rem}p{margin-top:0}.u-full-width{width:100%;box-sizing:border-box}.u-max-full-width{max-width:100%;box-sizing:border-box}.u-pull-right{float:right}.u-pull-left{float:left}hr{margin-top:3rem;margin-bottom:3.5rem;border-width:0;border-top:1px solid #E1E1E1}.container:after,.row:after,.u-cf{content:"";display:table;clear:both}@media (min-width: 400px){g text{font-size:2em}}@media (min-width: 750px){g text{font-size:1.5em}}@media (min-width: 1000px){g text{font-size:1em}}.no-bottom-margin{margin-bottom:0}.day{fill:#fff;stroke:#ccc}.month{fill:none;stroke:#000;stroke-width:2px}#tbl{overflow:auto}
.chord path {
  fill-opacity: .67;
  stroke: #000;
  stroke-width: .5px;
}
</style>
</head>
<body>
<div class="container">
  
  <div class="row">
    <div class="graph columns eight">
      
    </div>


      <div class="sectiontitle">
        <h1></h1>
      </div>


        <div class="columns two inbound">
          <h5>Inbound</h5>
          <table class="u-full-width">
                <thead>
                  <th id="title"></th>
                  <th></th>
                </thead>
                <tbody></tbody>
              </table>
        </div>
        <div class="columns two outbound">
          <h5>Outbound</h5>
          <table class="u-full-width">
                <thead>
                  <th id="title"></th>
                  <th></th>
                </thead>
                <tbody></tbody>
              </table>
        </div>
      </div>
      </div>




<!-- <div class="row clear">
  <div class="graph col col-6">
    
  </div>

  <div class="col col-6">
    <div class="row clear">
      <div class="col col-12 sectionTitle"><h1></h1>
      </div>
      <div class="row clear"></div>
      <div class="col col-12 has">
      <div class="row clear ">
          <div class="col col-6 inbound">
            <h2>Inbound Rules:</h2>
            
              <table>
                <thead>
                  <th>Name</th>
                  <th>#</th>
                </thead>
                <tbody></tbody>
              </table>
          </div>

          <div class="col col-6 outbound">
            <h2>Outbound Rules:</h2>

            <table>
              <thead>
                <th>Name</th>
                <th>#</th>
              </thead>
              <tbody></tbody>
            </table>
          </div>

      </div>
      </div>
      </div>
    </div>
  </div>
</div> -->
<script>

// From http://mkweb.bcgsc.ca/circos/guide/tables/


var headers = ['internal', 'external', 'dmz', 'remote_access', 'messaging', 'security'];
var textLabel = d3.scale.ordinal().range(headers);
var matrix = [[0,120,38,4,42,10],
[44,0,15,14,27,6],
[34,0,0,32,30,22],
[45,7,20,0,38,22],
[28,34,17,40,0,30],
[46,7,12,26,51,0]];
var objList = []
function makeObjs(data, headings) {
  var intIndex,
      objIntList = [];

  for (z = 0; z < headings.length; z++) { 
    intIndex = z
    var objRulesTo = [],
      objRulesFrom = [];
    for (x = 0; x < headings.length; x++) {
      objRulesTo.push(data[z][x]);
    }
    for (y = 0; y < headings.length; y++) {
      objRulesFrom.push(data[y][z]);
    }
    var objDetails = {
      index: intIndex,
      rulesTo: objRulesTo,
      rulesFrom: objRulesFrom
    };
    objIntList.push(objDetails);
  }
  return objIntList;
}

objList = makeObjs(matrix, headers);

var chord = d3.layout.chord()
    .padding(.1)
    .sortSubgroups(d3.descending)
    .matrix(matrix);

var width = 800,
    height = 800,
    innerRadius = Math.min(width, height) * .3,
    outerRadius = innerRadius * 1.1;
var colorbrewer = {RdYlBu: {
3: ["#fc8d59","#ffffbf","#91bfdb"],
4: ["#d7191c","#fdae61","#abd9e9","#2c7bb6"],
5: ["#d7191c","#fdae61","#ffffbf","#abd9e9","#2c7bb6"],
6: ["#d73027","#fc8d59","#fee090","#e0f3f8","#91bfdb","#4575b4"],
7: ["#d73027","#fc8d59","#fee090","#ffffbf","#e0f3f8","#91bfdb","#4575b4"],
8: ["#d73027","#f46d43","#fdae61","#fee090","#e0f3f8","#abd9e9","#74add1","#4575b4"],
9: ["#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4"],
10: ["#a50026","#d73027","#f46d43","#fdae61","#fee090","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"],
11: ["#a50026","#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"]
}};
var fill = d3.scale.ordinal()
    .domain(headers)
    .range(colorbrewer.RdYlBu[6]);

var svg = d3.select(".graph").append("svg")
    .attr("width", width)
    .attr("height", height)
    .attr("viewBox", "0 0 " + width + " " + height)
    .attr("width", "100%")
    .attr("height", "100%")
  .append("g")
    .attr("id", "circle")
    .attr("transform", "translate(" + (width / 2 -50)+ "," + ((height / 2) -35) + ")");

svg.append("g").selectAll("path")
    .data(chord.groups)
  .enter().append("path")
    .style("fill", function(d) { return fill(d.index); })
    .style("stroke", function(d) { return fill(d.index); })
    .attr("d", d3.svg.arc().innerRadius(innerRadius).outerRadius(outerRadius))
    .attr("class", function(d) { return d.index; })
    .on("mouseover.fade", fade(.1))
    .on("mouseout.fade", fade(1))
    .on("mouseover.par", function(d) {
      d3.selectAll("tbody").selectAll("tr").remove();
      var pars = d3.select(".inbound");
      dispText(pars, objList[d.index].rulesFrom); 
    })
    .on("mouseover.par2", function(d) {


      d3.select(".inbound").select("#title").text("Rules to " + headers[d.index] + " from:");
      d3.select(".outbound").select("#title").text("Rules from " + headers[d.index] + " to:");
      var pars = d3.select(".outbound");
      dispText(pars, objList[d.index].rulesTo);
    });





function dispText(divName, data) {
  
  divName.select("table")
  .select("tbody")
  .selectAll("tr")
  .data(data)
  .enter()
  .append("tr").style("display", function(d){ return d> 0 ? null : "none";})
  .append("td").text(function(d, i) {return headers[i];})
  divName.select("tbody").selectAll("tr").append("td").text(function(d) { return d;});
}

var ticks = svg.append("g").selectAll("g")
    .data(chord.groups)
  .enter().append("g").selectAll("g")
    .data(groupTicks)
  .enter().append("g")
    .attr("transform", function(d) {
      return "rotate(" + (d.angle * 180 / Math.PI - 90) + ")"
          + "translate(" + outerRadius + ",0)";
    });

svg.append("g").selectAll("text")
        .data(chord.groups)
    .enter()
    .append("sgv:text")
        .each(function(d){ d.angle = (d.startAngle + d.endAngle)/2;})
        .attr("dy", ".35em")
        .attr("class", "title")
        .attr("text-anchor", function(d) { return d.angle > Math.PI ? "end" : null; })
        .attr("transform", function(d) {
          return "rotate(" + (d.angle * 180 / Math.PI - 90) + ")"
            + "translate(" + (outerRadius + 40) + ")"
            + (d.angle > Math.PI ? "rotate(180)" : "");
        })
        .text(function(d,i) {return textLabel(i+1);});

ticks.append("line")
    .attr("x1", 1)
    .attr("y1", 0)
    .attr("x2", 5)
    .attr("y2", 0)
    .style("stroke", "#000");

ticks.append("text")
    .attr("x", 8)
    .attr("dy", ".35em")
    .attr("transform", function(d) { return d.angle > Math.PI ? "rotate(180)translate(-16)" : null; })
    .style("text-anchor", function(d) { return d.angle > Math.PI ? "end" : null; })
    .text(function(d) { return d.label; });

svg.append("g")
    .attr("class", "chord")
  .selectAll("path")
    .data(chord.chords)
  .enter().append("path")
    .attr("d", d3.svg.chord().radius(innerRadius))
    .style("fill", function(d) { return fill(d.target.index); })
    .style("opacity", 1);

// Returns an array of tick angles and labels, given a group.
function groupTicks(d) {
  var k = (d.endAngle - d.startAngle) / d.value;
  return d3.range(0, d.value, 10).map(function(v, i) {
    return {
      angle: v * k + d.startAngle,
      label: i % 1 || i == 0 ? null : v
    };
  });
}

function groupName(d) {
  var k = (d.endAngle + d.startAngle) / 2;
  return k;
}

// Returns an event handler for fading a given chord group.
function fade(opacity) {
  return function(g, i) {
    svg.selectAll(".chord path")
        .filter(function(d) { return d.source.index != i && d.target.index != i; })
      .transition()
        .style("opacity", opacity);
  };
}



</script>

</body>